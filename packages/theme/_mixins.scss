// ============================================================================================= //
//                                            MIXINS                                             //
// ============================================================================================= //

@use "sass:map";
@use "./variables";
@use "@sass-collective/property/custom-properties" with (
    $prefix: variables.$prefix
);
@use "@magnesium/core";
@use "@sass-collective/css";
@use "@sass-collective/property";
@use "./functions";

///
/// Core styles.
///
/// @see {mixin} selector
/// @see {mixin} property
/// @see {function} functions.get-keys
///
@mixin core-styles {
    @each $style in functions.get-keys() {
        @include selector(theme--#{$style}) {
            @include property(color, $style);
        }
    }

    @each $style in variables.$colors-bg {
        @include selector(theme--#{$style}-bg) {
            @include property(background-color, $style);
        }
    }
}

// ------------------------------------------------------------------------- //
// Private mixins
// ------------------------------------------------------------------------- //

// ...

// ------------------------------------------------------------------------- //
// Public mixins
// ------------------------------------------------------------------------- //

///
/// Set theme selector name.
///
/// @see {mixin} css.selector
///
@mixin selector($name) {
    .#{$name} {
        @if variables.$prefix != "" {
            @include css.selector(variables.$prefix, "-") {
                @content;
            }
        } @else {
            @content;
        }
    }
}

///
/// @example - scss
///   .foo {
///     @include theme.property(primary);
///   }
///
/// @example - css
///   foo {
///     --mg-theme-primary: #2674a2;
///   }
///
/// @example - scss
///   .foo {
///     @include theme.property(primary, darkcyan);
///   }
///
/// @example - css
///   .foo {
///     --mg-theme-primary: darkcyan;
///   }
///
/// @example - scss
///   .foo {
///     @include theme.property(color, primary);
///   }
///
/// @example - css
///   .foo {
///     color: var(--mg-theme-primary, #2674a2);
///   }
///
/// @see {mixin} property.declaration
/// @see {function} core.create-var
/// @see {function} functions.create-custom-map
/// @see {function} functions.color
/// @see {function} functions.is-color
///
@mixin property($property, $value: null, $important: false) {
    @if functions.is-color($property) {
        @if $value {
            $property: functions.create-custom-map($property, $value);
        } @else {
            $property: functions.create-custom-map($property, functions.color($property));
        }
    } @else if functions.is-color($value) {
        $value: core.create-var(theme-#{$value}, functions.color($value));
    }

    @include property.declaration($property, $value, $important);
}
